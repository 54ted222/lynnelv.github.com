<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8'>
		<meta name="keywords" content="吕彦蓉, lynnelv, Blog, 博客, 吕彦蓉的博客" />
		<meta name="Author" content="lynnelv" />
		<meta name="description" content="this是js的一个关键字，this的几种常见场景见于文。"/>
		<link rel="Shortcut Icon" href="/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" media="screen" charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="/css/style.css" media="screen" charset="utf-8" />
		<link rel="stylesheet" href="/css/prettify.css" />
		<link href="/css/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css" />
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<title>this关键字 &raquo; Lynnelv's Blog</title>
	</head>

	<body>
		<div class="container main">
			<div class="row">
				<div class="span2 side">
					<div class="head">
						<a href="/"><img src="/img/logo_lynnelv.png" alt="Lynnelv's Blog"></a>
					</div>
					<!--<input id="search-box" type="text" placeholder="Searching..." />-->
					<h4>CATEGORIES</h4>
					<ul class="navigator">
						
						<li id="旅行"><a href="/categories/旅行/">旅行</a></li>
						
						<li id="生活"><a href="/categories/生活/">生活</a></li>
						
						<li id="IT"><a href="/categories/IT/">IT</a></li>
						
						<li id="笔记"><a href="/categories/笔记/">笔记</a></li>
						
					</ul>
				</div>
				<div class="span8 offset3 content">
					<div class="post">
	<h1>this关键字</h1>
	<p>2013-09-29&nbsp; &nbsp; | &nbsp; &nbsp; 分类：<a href="/categories/IT">IT</a></p>
	<article>
		<p>this是js的一个关键字，指向当前函数的调用对象。</p>
<p>1.函数调用，指向全局对象</p>
<pre>
function test() {
	this.v = 1;
	alert(this.v);
}
test(); //1
</pre>
<p>this指向全局对象window</p>
<p>另一种形式可以证明this指向window，</p>
<pre>
var v = 1;
function test() {
	this.v = 2;
}
test(); //2
</pre>
<p>2. 作为对象方法调用，指向该对象</p>
<pre>
function test() {
	alert(this.v);
}
var o = {};
o.v = 1;
o.m = test;
o.m(); //1
</pre>
<p>函数作为某个对象的方法调用的时候，this指向的是当前函数的调用对象。</p>
<p>经典例子（实现点击start按钮，启动计时；点击stop按钮，暂停当前计时）,</p>
<p>涉及知识点（闭包、setInterval&setTimeout区别、this指针）。</p>
<pre>
(function() {
	function counter(num) {
		this.num = num;
	};
	counter.prototype = {
		show: function() {
			document.getElementById('text').innerHTML = this.num++;
		},
	start: function() {
		//此时this指向函数调用对象c
		this.stop();
		var me = this;  //保存当前this指向的对象c
		//setInterval为window对象的方法，此时this指向window，要想调用show()，必须先缓存c，
		console.log(this === c);    //true,this指向c
		this._timer  = setInterval(function() {
			console.log(this === c);    //false,this指向window
			me.show();
		}, 1000);
	},
	stop: function() {
		clearInterval(this._timer);
	}
	};
	var c = new counter();
	c.start();
})();
</pre>
<p>3. 构造函数中，指向新对象</p>
<pre>
function test() {
	this.v = 1;
}
var o = new test();
alert(o.v); //1
</pre>
<p>即在构造函数中，this指向的是新对象。</p>
<p>4. apply调用</p>
<p>apply( )在犀牛书里面的解释是，调用一个对象的方法，以另外一个对象替换当前对象，也就是改变当前函数的作用域。</p>
<pre>
var v = 1;
function test() {
	alert(this.v);
}
var o = {};
o.v = 2;
o.m  = test;
o.m.apply(); //这里要注意，当apply( )参数为空或undefined时，默认调用window。所以这里alert出来的是1
</pre>
<p>若改为o.m.apply(o); //2</p>

	</article>
</div>

<img src="/img/totop.png" alt="返回顶部" id="totop" title="返回顶部" style="display: none;" />

<div id="disqus_thread"></div>

<script type="text/javascript" src=/js/prettify.js></script>
<script type="text/javascript">
	var disqus_shortname = 'lynnelv';

	(function() {
		var pre_tags = document.getElementsByTagName('pre');
		for (var i = 0, l = pre_tags.length; i < l; i++) {
		pre_tags[i].className = 'prettyprint linenums';
		}
		prettyPrint();

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

		var toTopBtn = document.getElementById('totop'),
			client,
			isChrome = navigator.userAgent.match(/chrome(.+)/i);

		client = isChrome ? document.body : document.documentElement;

		function getScrollTop() {
			return document.body.scrollTop + document.documentElement.scrollTop;
		}

		window.onscroll = function() {
			var scrollTop = getScrollTop();
			if (scrollTop > 0) {
				toTopBtn.style.display = '';
			} else {
				toTopBtn.style.display = 'none';
			}
		}

		toTopBtn.onclick = function() {
			client.scrollTop = 0;
		}

	})();
</script>


				</div>
			</div>

			<div class="footer">
				<p>Copyright © 2013 lynnelv. <a href="http://weibo.com/lvyanrong" target="_blank">@飞鱼_笨懒懒</a></p>
			</div>
		</div>

		<!--<script type="text/javascript" charset="utf-8" src="/js/jquery-1.10.2.min.js"></script>-->
		<script type="text/javascript">
			(function() {
				var current = document.getElementById('IT').childNodes[0];
				if (current) {
					current.className = 'current';
				}
			})();

			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-44013526-1', 'github.com');
			ga('send', 'pageview');
		</script>
	</body>
</html>
